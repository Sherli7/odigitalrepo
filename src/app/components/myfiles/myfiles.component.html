<mat-card class="card-0x">
  <div class="fixed-header">
    <button class="back" mat-button (click)="previous()">
      <mat-icon>subdirectory_arrow_left</mat-icon>{{ nodeprecedent }}
    </button>
    <nav class="breadcrumb">
      <span *ngFor="let parentName of parentNameStack; let last = last">
        <a *ngIf="!last; else lastCrumb">{{ parentName }}</a>
        <ng-template #lastCrumb>{{ parentName }}</ng-template>
        <span *ngIf="!last" class="divider"> > </span>
      </span>
    </nav>
  </div>
  <!-- Other content of mat-card 
        Object { authorityId: "GROUP_EVERYONE",
         name: "Consumer", accessStatus: "ALLOWED" }
        entry: Object { isRoot: true, displayName: "ALFRESCO_ADMINISTRATORS",
         id: "GROUP_ALFRESCO_ADMINISTRATORS" }
  -->
</mat-card>
<mat-card class="card_style" *ngFor="let node of currentNode">
  <div *ngIf="node.entry.isFolder" (click)="findChildren(node.entry.id);getName(node.entry.name,node.entry.nodeType)">
    <mat-card-header>
      <mat-card-title>{{ node.entry.name }}</mat-card-title>
    </mat-card-header>
    <mat-card-content class="card_subtitle">
      <!-- Contenu existant pour les dossiers... -->
    </mat-card-content>
    <mat-card-actions class="actions">
      <!-- Boutons conditionnés par les permissions -->
      <button mat-button *ngIf="hasPermission(node.entry, 'Read')" (click)="previewFile(node.entry.id, node.entry.name)">
        <mat-icon>details</mat-icon> Détails
      </button>
      <button mat-button *ngIf="hasPermission(node.entry, 'Download')" (click)="downloadFilesAsZips(node.entry.id, node.entry.name)">
        <mat-icon>download</mat-icon> Télécharger le zip
      </button>
      <!-- ...autres boutons... -->
    </mat-card-actions>
  </div>
  <div *ngIf="node.entry.isFile">
    <mat-card-header>
      <mat-card-title>{{ node.entry.name }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!-- Affichage conditionnel basé sur les permissions et autres critères -->
      <p *ngIf="node.entry.createdAt === node.entry.modifiedAt">
        Créé il y a de cela {{ getTimeDate(node.entry.createdAt) }} par {{ node.entry.createdByUser.displayName }}
      </p>
      <p *ngIf="node.entry.createdAt !== node.entry.modifiedAt">
        Modifié il y a de cela {{ getTimeDate(node.entry.modifiedAt) }} par {{ node.entry.modifiedByUser.displayName }}
      </p>
    </mat-card-content>
    <mat-card-actions class="actions">
      <!-- Boutons conditionnés par les permissions -->
      <button mat-button *ngIf="hasPermission(node.entry, 'Read')" (click)="previewFile(node.entry.id, node.entry.name)">
        <mat-icon>details</mat-icon> Détails
      </button>
      <button mat-button *ngIf="hasPermission(node.entry, 'Download')" (click)="downloadFile(node.entry.id, node.entry.name)">
        <mat-icon>download</mat-icon> Télécharger
      </button>
      <button mat-button *ngIf="hasPermission(node.entry, 'Delete')" (click)="trashcanAction(node.entry.id,node.entry.name,'trashcanDel')">
        <mat-icon>delete</mat-icon> Supprimer
      </button>
      <!-- ...autres boutons... -->
    </mat-card-actions>  
  </div>
</mat-card>
